<?php$this->load->view('site/includes/header');$disabled = 'false';$exp_type = $listDetail->row()->exp_type;?><script type="text/javascript">    $(document).ready(function(){        $('#add_new').click(function(e) {                        $('#new_schedule_div').show();        });    });</script><link rel="stylesheet" type="text/css" media="all" href="<?php echo base_url(); ?>css/daterangepicker.css"/><script type="text/javascript" src="<?php echo base_url(); ?>js/moment.js"></script><script type="text/javascript" src="<?php echo base_url(); ?>js/daterangepicker.js"></script><style type="text/css">    .daterangepicker {        position: absolute;    }    @media (max-width: 740px) {        .daterangepicker {            height: 320px;            width: 280px;        }    }</style><div class="manage_items">    <div class="toggleMenuD">        <div class="bar1"></div>        <div class="bar2"></div>        <div class="bar3"></div>    </div>    <?php    $this->load->view('site/experience/experience_head_side');    ?>    <div class="centeredBlock">        <div class="content">            <h3><?php if ($this->lang->line('exp_set_your_time') != '') {                    echo stripslashes($this->lang->line('exp_set_your_time'));                } else echo "Schedule your Timing"; ?></h3>            <p><?php if ($this->lang->line('scheduleExperience') != '') {                    echo stripslashes($this->lang->line('scheduleExperience'));                } else echo "You can adjust this time depending on the dates you're scheduled to host. Each experience must be at least 1 hour."; ?></p>            <div>                <p class="text-danger error" id="form_action_msg_common" style="display: none;"></p>                <?php                echo form_open('#', array('onsubmit' => 'return validate_form_new(event)', 'name' => 'overviewlist', 'id' => 'overviewlist'));                echo form_input(array('type' => 'hidden', 'name' => 'experience_id', 'id' => 'experience_id', 'value' => $listDetail->row()->experience_id));                ?>                <div class="clear text-right">                    <?php                    echo form_button('', ($this->lang->line('exp_add_new') != '') ? stripslashes($this->lang->line('exp_add_new')) : 'Add New', array('class' => 'submitBtn1', 'id' => 'add_new'));                    ?>                </div>                <div class="form-group" style="display:none;" id="new_schedule_div">                    <p><?php if ($this->lang->line('experience_Schedule') != '') {                            echo stripslashes($this->lang->line('experience_Schedule'));                        } else echo "New Schedule"; ?> <span class="impt">*</span></p>                    <div class="row">                        <?php if ($listDetail->row()->date_count > 1) { ?>                            <div class="col-md-6 col-sm-6">                                <label><?php if ($this->lang->line('exp_from_date') != '') {                                        echo stripslashes($this->lang->line('exp_from_date'));                                    } else echo "From Date"; ?>:                                    <?= form_input('from_date', '', array('onchange' => 'affectTodate();', 'id' => 'datetimepicker1', 'placeholder' => 'yyyy-mm-dd')); ?></label>                            </div>                            <div class="col-md-6 col-sm-6">                                <label><?php if ($this->lang->line('exp_to_date') != '') {                                        echo stripslashes($this->lang->line('exp_to_date'));                                    } else echo "To Date"; ?>:                                    <?= form_input('to_date', '', array('id' => 'to_date', 'placeholder' => 'yyyy-mm-dd', 'readonly' => 'true')); ?></label>                            </div>                        <?php } else {                            ?>                            <div class="col-md-8">                                <label><?php if ($this->lang->line('exp_choose_date') != '') {                                        echo stripslashes($this->lang->line('exp_choose_date'));                                    } else echo "Choose Date"; ?>:                                </label>                                <div class="row">                                    <div class="col-md-6 col-sm-6">                                        <?= form_input('from_date', '', array('id' => 'datetimepicker1', 'placeholder' => 'yyyy-mm-dd')); ?>                                    </div>                                    <div class="col-md-6 col-sm-6">                                        <?= form_input(array('name' => 'to_date', 'id' => 'to_date')); ?>                                    </div>                                </div>                            </div>                            <?php                        } ?>                        <div class="col-md-12">                            <div class="form-group">                                <?= form_button('add_btn', ($this->lang->line('Submit') != '') ? stripslashes($this->lang->line('Submit')) : 'Submit', array('id' => 'add_btn', 'onclick' => 'add_dates()', 'class' => 'submitBtn1', 'style' => '')); ?>                                <?= form_button('cancel_btn', ($this->lang->line('Cancel') != '') ? stripslashes($this->lang->line('Cancel')) : 'Cancel', array('id' => 'cancel_btn', 'onclick' => 'cancel_dates_form()', 'class' => 'submitBtn1', 'style' => '')); ?></div>                        </div>                    </div>                </div>                <?php                echo form_close();                ?>            </div>            <div class="clear">                <br>                <div class="table-responsive">                <table class="table table-stripped">                    <tr>                        <th><?php if ($this->lang->line('Start Date') != '') {                                echo stripslashes($this->lang->line('Start Date'));                            } else echo "Start Date"; ?></th>                        <th><?php if ($this->lang->line('End Date') != '') {                                echo stripslashes($this->lang->line('End Date'));                            } else echo "End Date"; ?></th>                        <th><?php if ($this->lang->line('Action') != '') {                                echo stripslashes($this->lang->line('Action'));                            } else echo "Action"; ?></th>                    </tr>                    <?php                    if ($date_details->num_rows() > 0) {                        foreach ($date_details->result() as $row) {                            $check_booking_entry = $this->db->where(array('prd_id' => $row->experience_id, 'checkin' => date('Y-m-d', strtotime($row->from_date)), 'checkout' => date('Y-m-d', strtotime($row->to_date))))->get(EXPERIENCE_ENQUIRY);                            ?>                            <tr id="parent_<?php echo $row->id; ?>">                                <td>                                    <input type="hidden" id="from_date_<?php echo $row->id; ?>"                                           value="<?php echo $row->from_date; ?>"><?php echo $row->from_date; ?>                                </td>                                <td>                                    <input type="hidden" id="to_date_<?php echo $row->id; ?>"                                           value="<?php echo $row->to_date; ?>"><?php echo $row->to_date; ?>                                </td>                                <td class="date_actions" id="tab_span_date">                                    <?php if ($check_booking_entry->num_rows() == 0) {                                        ?> <ul> <?php                                     $allow = 0;                                    if ($row->time_count < $listDetail->row()->date_count) {                                        $allow = 1;                                    } ?>                                    <input type="hidden" name="schedule_hours_<?php echo $row->id; ?>"                                           id="schedule_hours_<?php echo $row->id; ?>"                                           value="<?php echo $listDetail->row()->total_hours; ?>">                                    <!-- <table style="width:100%;">                                        <tr> -->                                            <li class="action-icons c-delete"                                                onclick="get_new_timesheet('<?php echo $row->id; ?>','<?php echo $row->status; ?>','<?php echo $allow; ?>');"                                                title="Add Sheduled timings"><i                                                        class="fa fa-plus-square-o fa-lg cursor_pointer timerPlus"                                                        aria-hidden="true"></i></li>                                            <li class="" onclick="view_timesheet('<?php echo $row->id; ?>');"                                                title="View Sheduled timings"><i                                                        class="fa fa-eye fa-lg cursor_pointer"                                                        aria-hidden="true"></i> (<?php echo $row->time_count; ?>                                                )                                            </li>                                            <li><a href="<?php echo base_url(); ?>site/experience/delete_date/<?php echo $row->id; ?>/<?php echo $row->experience_id; ?>" class="delet_time" title="Delete"><i class="fa fa-trash-o fa-lg cursor_pointer" aria-hidden="true"></i> </a></li>                                            <?php                                            if ($row->status == 1) {                                                if ($this->lang->line('exp_inactive') != '') {                                                    $Inactive = stripslashes($this->lang->line('exp_inactive'));                                                } else {                                                    $Inactive = "Inactive";                                                }                                                $active_str = $Inactive;                                            } else {                                                if ($this->lang->line('exp_Active') != '') {                                                    $active = stripslashes($this->lang->line('exp_Active'));                                                } else {                                                    $active = "Active";                                                }                                                $active_str = $active;                                            }                                            ?>                                            <li class="status" id="span_sts" title="Make inactive"><a                                                        class="btn-sm status" href='javascript:void(0);'                                                        id="status_<?php echo $row->id; ?>"                                                        onclick="change_date_status('<?php echo $row->id; ?>',this);"><?php echo $active_str; ?></a>                                            </li>                                            <li class="" onclick="hide_child('<?php echo $row->id; ?>');"                                                style="display:none;" id="hide_icon_<?php echo $row->id; ?>"                                                title="hide"><i class="fa fa-minus-square-o fa-lg cursor_pointer"                                                                aria-hidden="true"></i></li>                                            <?php } else { ?> <ul> <?php                                                 echo $status = $check_booking_entry->row()->booking_status; ?>                                                <li class=""                                                    onclick="view_timesheet_forStatus('<?php echo $row->id; ?>','<?php echo $status; ?>');"                                                    title="View Sheduled timings"><i                                                            class="fa fa-eye fa-lg cursor_pointer"                                                            aria-hidden="true"></i> (<?php echo $row->time_count; ?>                                                    )                                                </li>                                                <?php                                            }                                            ?> </ul>                                        <!-- </tr>                                    </table> -->                                </td>                            </tr>                            <?php                        }                    } else {                        ?>                        <tr>                            <td colspan="3"><?php if ($this->lang->line('exp_no_activity_found') != '') {                                    echo stripslashes($this->lang->line('exp_no_activity_found'));                                } else echo "No Activity Found.."; ?></td>                        </tr>                        <?php                    }                    ?>                </table>            </div>            </div>            <div class="clear text-right">                <?php                if ($timing == 1) {                    echo form_button('', ($this->lang->line('Continue') != '') ? stripslashes($this->lang->line('Continue')) : 'Continue', array('class' => 'submitBtn1 continue', 'id' => 'next-btn'));                } else {                    echo '<p class="text-danger text-center">' . ($this->lang->line('pls_fill_nxt_form') != '') ? stripslashes($this->lang->line('pls_fill_nxt_form')) : "Please fill all the details to get Next form" . '</p>';                }                ?>            </div>        </div>    </div>    <div class="rightBlock">        <h2><i class="fa fa-lightbulb-o toggleNotes" aria-hidden="true"></i>            <?php if ($this->lang->line('exp_frame_schedule') != '') {                echo stripslashes($this->lang->line('exp_frame_schedule'));            } else echo "Frame your Schedule"; ?></h2>        <!-- <p><?php if ($this->lang->line('exp_schedule_for_newdate_new') != '') {                echo stripslashes($this->lang->line('exp_schedule_for_newdate_new'));            } else echo "It's all about a matter of time. Organize your experience by choosing your favorite date and time. You can plot the time schedule by simply clicking the (plus) button.  You can adjust this time later depending on the dates which you scheduled."; ?></p> -->        <p><?php if ($this->lang->line('Schedule_the_timing') != '') {                echo stripslashes($this->lang->line('Schedule_the_timing'));            } else echo "Schedule the timing of your experience. Add and adjust the time based on your preference anytime. "; ?></p>         <p><?php if ($this->lang->line('The_two_types_of_experience') != '') {                echo stripslashes($this->lang->line('The_two_types_of_experience'));            } else echo "The two types of experience schedules are:"; ?></p>          <p><?php if ($this->lang->line('Experience_Experience_which_is_carriedImmersions_Experience') != '') {                echo stripslashes($this->lang->line('Experience_Experience_which_is_carriedImmersions_Experience'));            } else echo "<b>Experience</b>: Experience which is carried on for one day."; ?></p>        <p><?php if ($this->lang->line('Immersions_Experience') != '') {                echo stripslashes($this->lang->line('Immersions_Experience'));            } else echo "<b>Immersions</b>: Experience which are carried for more than a day."; ?></p>    </div></div>	<?php 				if ($this->lang->line('schedule_date_added') != '') {					$sch_date= stripslashes($this->lang->line('schedule_date_added'));				} else {					$sch_date= "Schedule date has been added Successfully";				} 								echo form_input(['type'=>'hidden' ,								'id'=>'sch_date',								'value'=>$sch_date]);		?>		<?php 				if ($this->lang->line('date_exists_already') != '') {					$date_exist= stripslashes($this->lang->line('date_exists_already'));				} else {					$date_exist= "Schedule date exists Already";				} 				echo form_input(['type'=>'hidden' ,								'id'=>'date_exist',								'value'=>$date_exist]);		?>			<?php 				if ($this->lang->line('not_valid_times') != '') {					$not_valid= stripslashes($this->lang->line('not_valid_times'));				} else {					$not_valid= "Not Valid Times";				} 				echo form_input(['type'=>'hidden' ,								'id'=>'not_valid',								'value'=>$not_valid]);			?>					<?php 				if ($this->lang->line('pls_choose_schedule_date') != '') {					$pls_choose= stripslashes($this->lang->line('pls_choose_schedule_date'));				} else {					$pls_choose= "Please Choose Scheduled Date";				} 				echo form_input(['type'=>'hidden' ,								'id'=>'pls_choose',								'value'=>$pls_choose]);				?>						<?php 				if ($this->lang->line('fill_all_data') != '') {					$fil_all= stripslashes($this->lang->line('fill_all_data'));				} else {					$fil_all= "Please fill all data";				} 				echo form_input(['type'=>'hidden' ,								'id'=>'fil_all',								'value'=>$fil_all]);				?>				<?php 				if ($this->lang->line('actived_succ') != '') {					$actived_succ= stripslashes($this->lang->line('actived_succ'));				} else {					$actived_succ= "Schedule date has been activated Successfully";				} 				echo form_input(['type'=>'hidden' ,								'id'=>'actived_succ',								'value'=>$actived_succ]);				?>						<?php 				if ($this->lang->line('inactived_succ') != '') {					$inactived_succ= stripslashes($this->lang->line('inactived_succ'));				} else {					$inactived_succ= "Schedule date has been inactivated Successfully";				} 				echo form_input(['type'=>'hidden' ,								 'id'=>'inactived_succ',								 'value'=>$inactived_succ]);				?>						<?php 				if ($this->lang->line('exp_fill_all_fields') != '') {					$fil_fields= stripslashes($this->lang->line('exp_fill_all_fields'));				} else {					$fil_fields= "Please fill all mandatory fields";				} 				echo form_input(['type'=>'hidden' ,								 'id'=>'fil_fields',								 'value'=>$fil_fields]);				?>						<?php 				if ($this->lang->line('end_time_greater') != '') {					$end_time_greater= stripslashes($this->lang->line('end_time_greater'));				} else {					$end_time_greater= "End time should be greater than start time";				} 				echo form_input(['type'=>'hidden' ,								 'id'=>'end_time_greater',								 'value'=>$end_time_greater]);				?>						<?php 				if ($this->lang->line('allowed_limit') != '') {					$allowed_limit= stripslashes($this->lang->line('allowed_limit'));				} else {					$allowed_limit= "Allowed time limit is";				} 				echo form_input(['type'=>'hidden' ,								 'id'=>'allowed_limit',								 'value'=>$allowed_limit]);				?>						<?php 				if ($this->lang->line('hours') != '') {					$hours= stripslashes($this->lang->line('hours'));				} else {					$hours= "hours";				} 				echo form_input(['type'=>'hidden' ,								 'id'=>'hours',								 'value'=>$hours]);				?>						<?php 				if ($this->lang->line('timings_were_added') != '') {					$timings_were= stripslashes($this->lang->line('timings_were_added'));				} else {					$timings_were= "Timings were scheduled for this date limits. Please add a new date";				} 				echo form_input(['type'=>'hidden' ,								 'id'=>'timings_were',								 'value'=>$timings_were]);				?>						<?php 				if ($this->lang->line('pls_activate_the') != '') {					$pls_activate= stripslashes($this->lang->line('pls_activate_the'));				} else {					$pls_activate= "Please activate the scheduled date and add timings";				} 				echo form_input(['type'=>'hidden' ,								 'id'=>'pls_activate',								 'value'=>$pls_activate]);				?>		<script>    /*Watch for click event*/    $(document).ready(function () {        // $('#add_new').click(function() {            // hide_other_divs();        //     $('#new_schedule_div').show();        // });        $('#next-btn').click(function (e) {            has = $(this).hasClass("disabled_exp");            if (has == false) {                window.location.href = '<?php echo base_url() . "tagline_experience/" . $id; ?>';            }        });    });    /*Hide All other Divs*/    function hide_other_divs(date_id='') {        $('#hide_icon_' + date_id).hide();        all_form_reset();        if (date_id == '') {            $('[id^=child_create_]').hide();            $('[id^=child_view_]').hide();            $('[id^=grand_child_edit_]').hide();        } else {            $('[id^=grand_child_edit_]').hide();            $('#child_create_' + date_id).hide();            $('#child_view_' + date_id).hide();        }    }    /*Action of cancel button*/    function cancel_dates_form() {        $('#new_schedule_div').hide();    }    /*Reset all forms*/    function all_form_reset() {        $('form').each(function () {            this.reset()        });    }    /*Date picker*/    var options = {        format: 'YYYY-MM-DD',        singleDatePicker: true,        autoUpdateInput: false,        minDate: new Date()    };    $('#datetimepicker1').daterangepicker(options, function (start, end, label) {        $('#datetimepicker1').val(start.format('YYYY-MM-DD'));        affectTodate();    });    /* to date calculation  */    function affectTodate() {        date_count = Number(<?php echo $listDetail->row()->date_count; ?>);        from_date = $('#datetimepicker1').val();        $.ajax({            type: 'POST',            url: '<?php echo base_url()?>site/experience/todateCalculate',            data: {from_date: from_date, date_count: date_count},            success: function (response) {                $("#to_date").val(response.trim());            }        });    }    /*Add the experience date and time*/    function add_dates() {       $('.loading').show();	  var sch_date=$("#sch_date").val();	  var date_exist=$("#date_exist").val();	  var not_valid=$("#not_valid").val();	  var pls_choose=$("#pls_choose").val();	  var fil_all=$("#fil_all").val();        var from_date = $("#datetimepicker1").val();        var to_date = $("#to_date").val();        var price = $("#price").val();        var experience_id = $("#experience_id").val();        var dev_exp_currency = $("#dev_exp_currency").val();        if (from_date != '' && to_date != '' && price != '' && dev_exp_currency != '') {            $.ajax({                type: 'POST',                url: '<?php echo base_url()?>site/experience/saveDates',                data: {                    from_date: from_date,                    to_date: to_date,                    price: price,                    experience_id: experience_id,                    currency: dev_exp_currency                },                dataType: 'json',                success: function (data) {                    if (data.case == 1) {                       //  $('.loading').hide();                        $('#dates_id').val(data.date_id);                        $('#add_btn').hide();                        $('#form_action_msg_common').html(sch_date);                        $('#form_action_msg_common').fadeIn('slow', function () {                            $(this).delay(1000).fadeOut('slow', function () {                                $('#form_action_msg_common').html('');                            });                        });                        window.location.reload();                    } else if (data.case == 2) {                        window.location.reload();                    }                    else if (data.case == 3) {                        $('.loading').hide();                        $('#form_action_msg_common').html(date_exist);                        $('#form_action_msg_common').fadeIn('slow', function () {                            $(this).delay(1000).fadeOut('slow', function () {                                $('#form_action_msg_common').html('');                            });                        });                    }                    else if (data.case == 4) {                         $('.loading').hide();                        $('#form_action_msg_common').html(not_valid);                        $('#datetimepicker1').val('');                        $('#to_date').val('');                    }                }            });        }        else {            if (price != '' || dev_exp_currency != '') {                $('.loading').hide();                $('#form_action_msg_common').html(pls_choose);                $("#datetimepicker1").focus();                $('#form_action_msg_common').fadeIn('slow', function () {                    $(this).delay(1000).fadeOut('slow', function () {                        $('#form_action_msg_common').html('');                    });                });            }            else {                $('#form_action_msg_common').html(fil_all);                $('#form_action_msg_common').fadeIn('slow', function () {                    $(this).delay(1000).fadeOut('slow', function () {                        $('#form_action_msg_common').html('');                    });                });            }        }    }    /*Change Date status*/    function change_date_status(id, obj) {        $('.loading').show();        hide_other_divs();				var actived_succ=$("#actived_succ").val();		var inactived_succ=$("#inactived_succ").val();        $('#new_schedule_div').hide();        str = $(obj).html().trim();        if (str == 'Active') {            status = '1';        } else {            status = '0';        }        $.ajax({            type: 'POST',            url: '<?php echo base_url()?>site/experience/change_date_status',            data: 'id=' + id + '&status=' + status,            dataType: 'html',            success: function (data) {                if (data) {                    if (str == 'Active') {                        $(obj).html('Inactive');                        $('#form_action_msg_common').html(actived_succ);                        $('#form_action_msg_common').fadeIn('slow', function () {                            $(this).delay(1000).fadeOut('slow', function () {                                $('#form_action_msg_common').html('');                            });                        });                    } else {                        $(obj).html('Active');                        $('#form_action_msg_common').html(inactived_succ);                        $('#form_action_msg_common').fadeIn('slow', function () {                            $(this).delay(1000).fadeOut('slow', function () {                                $('#form_action_msg_common').html('');                            });                        });                    }                    window.location.reload();                }            }        });    }    /*Get time sheet*/    function get_new_timesheet(date_id, status, allow) {		var timings_were=$("#timings_were").val();		var pls_activate=$("#pls_activate").val();		        $('#new_schedule_div').hide();        continue_button_manage('hide');        hide_other_divs();        if (allow == 0) {            $('#form_action_msg_common').html(timings_were);            $('#form_action_msg_common').fadeIn('slow', function () {                $(this).delay(5000).fadeOut('slow', function () {                    $('#form_action_msg_common').html('');                });            });            continue_button_manage('show');            return false;        }        if (status == 1) {            $('#form_action_msg_common').html(pls_activate);            $('#form_action_msg_common').fadeIn('slow', function () {                $(this).delay(5000).fadeOut('slow', function () {                    $('#form_action_msg_common').html('');                });            });            return false;        }        if ($('#child_create_' + date_id).length > 0) {            $('#child_create_' + date_id).show();            $('#child_view_' + date_id).hide();            return false;        }        $('#child_create_' + date_id).show();        $.ajax({            type: 'POST',            url: '<?php echo base_url()?>site/experience/get_new_timesheet',            data: "date_id=" + date_id,            dataType: 'html',			async:false,            success: function (data) {                $('#hide_icon_' + date_id).show();                $('#child_create_' + date_id).remove();                if ($('#child_view_' + date_id).length > 0) {                    $('#child_view_' + date_id).hide();                    $('#child_view_' + date_id).after(data);                } else {                    $('#parent_' + date_id).after(data);                }                var dates_datas = $('#disabled_date_' + date_id).val();                var BookedDates = dates_datas.split(",");				$('.dev_multi_schedule_date').each(function () {                    var options = {                        format: 'YYYY-MM-DD',                        singleDatePicker: true,                        autoUpdateInput: false,						autoclose: true,						useCurrent: false,						keepOpen: false,						autoApply: true,						//todayBtn: false,						//todayHighlight: false,                        locale: {                            format: 'YYYY-MM-DD'                        },						isInvalidDate: function (date) {                            var formatted = date.format('MM/DD/YYYY');                            return BookedDates.indexOf(formatted) > -1;                        },                        minDate: new Date($('#from_date_' + date_id).val()),                        maxDate: new Date($('#to_date_' + date_id).val())                    };                    $(this).daterangepicker(options, function (start, end, label) {						$('.dev_multi_schedule_date').val(start.format('YYYY-MM-DD'));                    });	                });				            }        });		/*$('.dev_multi_schedule_date').daterangepicker({		  autoUpdateInput: false		}, function(chosen_date) {		  $('.dev_multi_schedule_date').val(chosen_date.format('YYYY-MM-DD'));		});*/		/*$('.dev_multi_schedule_date').on('changeDate', function(e) {            //console.log($("#m").val());			alert('s');        });*/		$('.dev_multi_schedule_date').val('');    }    function view_timesheet(date_id) {        $('.loading').show();        $('#hide_icon_' + date_id).show();        hide_other_divs();        $('#new_schedule_div').hide();        if ($('#child_view_' + date_id).length > 0) {            $('.loading').hide();            $('#child_view_' + date_id).show();        }        $('#child_view_' + date_id).show();        if ($('.child_' + date_id).length > 0) {            $('.loading').hide();            return false;        }        if (date_id != '' && date_id != null) {            $.ajax({                type: 'POST',                url: '<?php echo base_url()?>site/experience/get_timesheets',                data: "date_id=" + date_id,                dataType: 'html',                success: function (data) {                     $('.loading').hide();                    $('#parent_' + date_id).after(data);                }            });        }    }    /*View time sheets*/    function view_timesheet_forStatus(date_id, status) {        $('#hide_icon_' + date_id).show();        hide_other_divs();        $('#new_schedule_div').hide();        if ($('#child_view_' + date_id).length > 0) {            $('#child_view_' + date_id).show();        }        $('#child_view_' + date_id).show();        if ($('.child_' + date_id).length > 0) {            return false;        }        if (date_id != '' && date_id != null) {            $.ajax({                type: 'POST',                url: '<?php echo base_url()?>site/experience/get_timesheets_forStatus',                data: "date_id=" + date_id + "&status_is=" + status,                dataType: 'html',                success: function (data) {                    $('#parent_' + date_id).after(data);                }            });        }    }    function unavailable_add_new(date) {        dateAr = [];        $('.scheduled_date_exists').each(function () {            dateAr.push($(this).val());        });        var string = jQuery.datepicker.formatDate('yy-mm-dd', date);        return [dateAr.indexOf(string) == -1];    }    function unavailable_new(date) {        dateAr = [];        $('.dev_multi_schedule_date_new').each(function () {            dateAr.push($(this).val());        });        var string = jQuery.datepicker.formatDate('yy-mm-dd', date);        return [dateAr.indexOf(string) == -1];    }    function cancel_dates_form() {        $('#new_schedule_div').hide();        continue_button_manage('show');    }    function continue_button_manage(status) {        if (status == "show") {            $('.continue').removeClass('disabled_exp');        } else {            $('.continue').addClass('disabled_exp');        }    }    function char_count(obj) {        value_str = obj.value.trim();        var length = value_str.length;        var maxlength = $(obj).attr('maxlength');        var id = obj.id;        var length = maxlength - length;        $('#' + id + '_char_count').text(length);    }    function hide_child(date_id) {        $('.child_' + date_id).remove();        hide_other_divs(date_id);        continue_button_manage('show');    }    /*Cancel the timesheet*/    function cancel_time_sheet(date_id) {        all_form_reset();        $('#child_create_' + date_id).hide();        continue_button_manage('show');    }    /*adding the time sheet to DB*/    function add_time_sheet(date_id) {           $('.loading').show();		var fil_fields=$("#fil_fields").val();		var end_time_greater=$("#end_time_greater").val();		var allowed_limit=$("#allowed_limit").val();		var hours=$("#hours").val();		        start_time = $('#start_time_' + date_id).val();        end_time = $('#end_time_' + date_id).val();        schedule_date = $('#schedule_date_' + date_id).val();        title = $('#title_' + date_id).val();        description = $('#description_' + date_id).val();        continue_button_manage('hide');        if (start_time == '' || end_time == '' || schedule_date == '' || title == '' || description == '') {               $('.loading').hide();            $('#new_form_error_msg_' + date_id).html(fil_fields);            $('#new_form_error_msg_' + date_id).fadeIn('slow', function () {                $(this).delay(1000).fadeOut('slow', function () {                    $('#new_form_error_msg_' + date_id).html('');                });            });            return false;        }        hours_count = $('#schedule_hours_' + date_id).val();        var s_time = $('#star_time_' + date_id).val();        var e_time = $('#end_time_' + date_id).val();		if(e_time=='00:00') { e_time='24:00'; }	        var diff_start = s_time.replace(":", ".");        var diff_end = e_time.replace(":", ".");        if (parseInt(diff_end) <= parseInt(diff_start)) {            $('.loading').hide();            $('#new_form_error_msg_' + date_id).html(end_time_greater);            $('#new_form_error_msg_' + date_id).fadeIn('slow', function () {                $(this).delay(5000).fadeOut('slow', function () {                    $('#new_form_error_msg_' + date_id).html('');                });            });            return false;        }        if (hours_count != '' && hours_count > 0) {            diff = parseFloat(diff_end - diff_start);            if (parseInt(hours_count) == parseInt(diff)) {            } else {                $('.loading').hide();                $('#new_form_error_msg_' + date_id).html(allowed_limit + " "+hours_count +" "+ hours);                $('#new_form_error_msg_' + date_id).fadeIn('slow', function () {                    $(this).delay(5000).fadeOut('slow', function () {                        $('#new_form_error_msg_' + date_id).html('');                    });                });                return false;            }        }        $.ajax({            type: 'POST',            url: '<?php echo base_url()?>site/experience/add_timesheet',            data: $('#new_time_sheet_' + date_id).serialize(),            dataType: 'html',            success: function (data) {                if (data) {                       $('.loading').show();                    alert("<?php if ($this->lang->line('exp_time_schedule_added') != '') {                        echo stripslashes($this->lang->line('exp_time_schedule_added'));                    } else echo "Time schedule has been added successfully"; ?>");                    continue_button_manage('hide');                    window.location.reload();                }            }        });    }    /*Assign time to hour*/    function assign_to_time_hour_edit(id, date_id) {        hours_count = $('#schedule_hours_' + date_id).val();        var start_time = $('#time_sheet_' + id).find('input[name="start_time"]').val();        var end_time = $('#time_sheet_' + id).find('input[name="end_time"]').val();        if (hours_count != '' && hours_count > 0) {            $('#time_sheet_' + id).find('input[name="end_time"]').prop('readonly', true);            if (start_time == '') {                $('#time_sheet_' + id).find('input[name="end_time"]').val('');                $('#new_form_error_msg_' + date_id).html('Please choose start time ');                $('#new_form_error_msg_' + date_id).fadeIn('slow', function () {                    $(this).delay(5000).fadeOut('slow', function () {                        $('#new_form_error_msg_' + date_id).html('');                    });                });                return false;            }            var start_time = start_time.replace(":", ".");            end_val = (parseFloat(start_time) + parseFloat(hours_count)).toFixed(2);            end_val = ('0' + end_val).slice(-5);             total_hours = (parseFloat(24) - parseFloat(hours_count));            if (end_val < 24) {                end_val = end_val.replace(".", ":");                $('#time_sheet_' + id).find('input[name="end_time"]').val(end_val);            } else {                $('#time_sheet_' + id).find('input[name="end_time"]').val('');                $('#edit_form_error_msg_' + id).html('Allowed time limit is ' + hours_count + ' hours. Please change the start time ');                $('#edit_form_error_msg_' + id).fadeIn('slow', function () {                    $(this).delay(5000).fadeOut('slow', function () {                        $('#edit_form_error_msg_' + id).html('');                    });                });                return false;            }        }    }    function assign_to_time_hour(date_id, tim='') {         hours_count = $('#schedule_hours_' + date_id).val();         if (hours_count != '' && hours_count != null && hours_count > 0)         {            var start_time = $('#star_time_' + date_id).val();            if (start_time == '')             {                $('#end_time_' + date_id).val('');                $('#new_form_error_msg_' + date_id).html('Please choose start time ');                $('#new_form_error_msg_' + date_id).fadeIn('slow', function () {                    $(this).delay(5000).fadeOut('slow', function () {                        $('#new_form_error_msg_' + date_id).html('');                    });                });                return false;            }             var start_time = start_time.replace(":", ".");            end_val = (parseFloat(start_time) + parseFloat(hours_count)).toFixed(2);             end_val = (end_val).slice(-5);             total_hours = (parseFloat(24) - parseFloat(hours_count));            if (end_val < 24) {                end_val = end_val.replace(".", ":");                $('#end_time_' + date_id).val(end_val);                /*$("#end_time_" + date_id).attr('disabled',true);*/            } else {                $('#end_time_' + date_id).val('');                $('#new_form_error_msg_' + date_id).html('Allowed time limit is ' + hours_count + ' hours. Please change the start time ');                $('#new_form_error_msg_' + date_id).fadeIn('slow', function () {                    $(this).delay(5000).fadeOut('slow', function () {                        $('#new_form_error_msg_' + date_id).html('');                    });                });                return false;            }        }    }    /*Change schedule status*/    function change_timing_status(id, obj, exp_date_id) {        $('.loading').show();        $('#new_schedule_div').hide();        str = $(obj).html().trim();        if (str == 'Active') {            status = '0';        } else {            status = '1';        }        $.ajax({            type: 'POST',            url: '<?php echo base_url()?>site/experience/change_timing_status',            data: 'id=' + id + '&status=' + status + '&exp_date_id=' + exp_date_id,            dataType: 'html',            success: function (data) {                if (data) {                    if (str == 'Active') {                        $(obj).html('Inactive');                        $('#form_action_msg_common').html('Sheduled time has been inactivated Successfully..!');                        $('#form_action_msg_common').fadeIn('slow', function () {                            $(this).delay(1000).fadeOut('slow', function () {                                $('#form_action_msg_common').html('');                            });                        });                    } else {                        $(obj).html('Active');                        $('#form_action_msg_common').html('Sheduled time has been activated Successfully..!');                        $('#form_action_msg_common').fadeIn('slow', function () {                            $(this).delay(1000).fadeOut('slow', function () {                                $('#form_action_msg_common').html('');                            });                        });                    }                }                $('.loading').hide();            }        });    }    /*Edit Time Sheets*/    function edit_time_sheet(id, date_id) {      $('.loading').show();		//alert('s');        $('[id^=grand_child_edit_]').hide();        if ($('#grand_child_edit_' + id).length > 0) {            $('#grand_child_edit_' + id).show();            return false;        }        $.ajax({            type: 'POST',            url: '<?php echo base_url()?>site/experience/get_timesheets_for_edit',            data: 'id=' + id,            dataType: 'html',            success: function (data) {                if (data != '') {                    $('#first_child_' + id).after(data);                    $('#grand_child_edit_' + id).show();                     $('.loading').hide();                    $('.dev_multi_schedule_date').each(function () {                        var options = {                            format: 'YYYY-MM-DD',                            singleDatePicker: true,                            autoUpdateInput: true,                            locale: {                                format: 'YYYY-MM-DD'                            },                            minDate: new Date($('#from_date_' + date_id).val()),                            maxDate: new Date($('#to_date_' + date_id).val())                        };                        $(this).daterangepicker(options, function (start, end, label) {                        });                    });                }            }        });        $('#update_time_sheet_' + id).show();        $("#timesheet_" + id + " input").prop("disabled", false);        $("#timesheet_" + id + " textarea").prop("disabled", false);    }    /*Delete time sheet*/    function remove_time_sheet(id) {        if (confirm("<?php if ($this->lang->line('exp_are_you_sure_todelete') != '') {                echo stripslashes($this->lang->line('exp_are_you_sure_todelete'));            } else echo "Are you sure to delete this scheduled timing?"; ?>")) {            $('#first_child_' + id).remove();            $.ajax({                type: 'POST',                url: '<?php echo base_url()?>site/experience/delete_timesheet',                data: "id=" + id,                dataType: 'html',                success: function (data) {                    boot_alert("<?php if ($this->lang->line('exp_time_removed_succ') != '') {                        echo stripslashes($this->lang->line('exp_time_removed_succ'));                    } else echo "Time schedule has been removed successfully"; ?>");                    window.location.reload();                }            });        }    }    /*Hide time sheet edit form*/    function cancel_time_sheet_grand_child(id) {        all_form_reset();        $('#grand_child_edit_' + id).remove();    }    /*Update edited Time sheet*/    function update_time_sheet(id, date_id)     {		 		var fil_fields_up=$("#fil_fields").val();		var end_time_greater_up=$("#end_time_greater").val();		var allowed_limit_up=$("#allowed_limit").val();		var hours_up=$("#hours").val();        var schedule_date = $('#schedule_date_' + id).val();        var start_time = $('#start_time_' + id).val();        var end_time = $('#end_time_' + id).val();        var title = $('#title_' + id).val();        var description = $('#description_' + id).val();        if (schedule_date == '' || start_time == '' || end_time == '' || title == '' || description == '') {            $('#edit_form_error_msg_' + id).html(fil_fields_up);            $('#edit_form_error_msg_' + id).fadeIn('slow', function () {                $(this).delay(5000).fadeOut('slow', function () {                    $('#edit_form_error_msg_' + id).html('');                });            });            return false;        }        hours_count = $('#schedule_hours_' + date_id).val();        hours_count = $('#schedule_hours_' + date_id).val();        var diff_start = start_time.replace(":", ".");        var diff_end = end_time.replace(":", ".");        if (parseInt(diff_end) <= parseInt(diff_start)) {            $('#edit_form_error_msg_' + id).html(end_time_greater_up);            $('#edit_form_error_msg_' + id).fadeIn('slow', function () {                $(this).delay(5000).fadeOut('slow', function () {                    $('#edit_form_error_msg_' + id).html('');                });            });            return false;        }        if (hours_count != '' && hours_count > 0) {            diff = parseFloat(diff_end - diff_start);            if (parseInt(hours_count) == parseInt(diff)) {            } else {                $('#edit_form_error_msg_' + id).html(allowed_limit_up +" " + hours_count + " " + hours_up);                $('#edit_form_error_msg_' + id).fadeIn('slow', function () {                    $(this).delay(5000).fadeOut('slow', function () {                        $('#edit_form_error_msg_' + id).html('');                    });                });                return false;            }        }        if (id != '' && id != null) {             $('.loading').show();            $.ajax({                type: 'POST',                url: '<?php echo base_url()?>site/experience/update_timesheet',                data: $('#time_sheet_' + id).serialize(),                dataType: 'html',                success: function (data) {                    if (data) {                         $('.loading').hide();                        boot_alert("<?php if ($this->lang->line('exp_time_schedule_succ') != '') {                            echo stripslashes($this->lang->line('exp_time_schedule_succ'));                        } else echo "Time schedule is updated successfully"; ?>");                        //window.location.reload();                    }                }            });        }    }</script>	<?php 		if ($this->lang->line('words_reached') != '') {			$words_reached= stripslashes($this->lang->line('words_reached'));		} else {			$words_reached= "Words Reached";		} 		echo form_input(['type'=>'hidden' ,						 'id'=>'words_reached',						 'value'=>$words_reached]);							 		if ($this->lang->line('You can add') != '') {			$you_can= stripslashes($this->lang->line('You can add'));		} else {			$you_can= "You can add";		} 		echo form_input(['type'=>'hidden' ,						 'id'=>'you_can',						 'value'=>$you_can]);						 						 						 	 if ($this->lang->line('more_words') != '') {			$more_wrds= stripslashes($this->lang->line('more_words'));		} else {			$more_wrds= "more_words";		} 		echo form_input(['type'=>'hidden' ,						 'id'=>'more_wrds',						 'value'=>$more_wrds]);												 	?><script>    function word_count(obj)    {		var words_reached=$("#words_reached").val();		var you_can=$("#you_can").val();		var more_wrds=$("#more_wrds").val();        var id = obj.id;          var wordLen1 = 10, len1;        len1 = $('#'+id).val().split(/[\s]+/);        if (len1.length > wordLen1) {            if (event.keyCode == 46 || event.keyCode == 8) {            }            else if (event.keyCode < 48 || event.keyCode > 57) {                event.preventDefault();            }        }        wordsLeft = (wordLen1) - len1.length;        if (wordsLeft <= 0) {            $('#' + id + '_char_count').text(10 +" "+ words_reached);           return false;        }        else {            $('#' + id + '_char_count').html(you_can+ " " + wordsLeft + " "+ more_wrds);        }    }   function description_count(obj1){	   var words_reached_desc=$("#words_reached").val();	   var you_can_desc=$("#you_can").val();	   var more_wrds_desc=$("#more_wrds").val();       var id_desc = obj1.id;       var wordLen_desc = 50, len_desc;       len_desc = $('#'+id_desc).val().split(/[\s]+/);       if (len_desc.length > wordLen_desc) {           if (event.keyCode == 46 || event.keyCode == 8) {           }           else if (event.keyCode < 48 || event.keyCode > 57) {               event.preventDefault();           }       }       wordsLeft_desc = (wordLen_desc) - len_desc.length;       if (wordsLeft_desc <= 0) {           $('#' + id_desc + '_char_count').text(50 + " "+ words_reached_desc );           return false;       }       else {           $('#' + id_desc + '_char_count').html(you_can_desc+" " + wordsLeft_desc + " "+more_wrds_desc);       }   }</script>